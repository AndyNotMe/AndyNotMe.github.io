<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="以下的安装过程全部省略,因为本身不存在什么兼容性问题,用python对应版本的pip进行指令安装就可以在脚本页面进行脚本编写.  Python-Flask 这个库以前就看到过,写简单的exp交互式脚本挺简单的,关键是他还是轻量级别的服务器;根据官网上的介绍,此库依赖于Jinja引擎和Werkzeug WSGI工具包;有兴趣的可以深入研究一下;工具本身是很简单的一个轻量级框架,只要一点前端基础,也是">
<meta property="og:type" content="article">
<meta property="og:title" content="python-libs z3&amp;flask">
<meta property="og:url" content="http://example.com/2023/02/17/python-libs-z3-flask/index.html">
<meta property="og:site_name" content="a0dy&#39;s Home">
<meta property="og:description" content="以下的安装过程全部省略,因为本身不存在什么兼容性问题,用python对应版本的pip进行指令安装就可以在脚本页面进行脚本编写.  Python-Flask 这个库以前就看到过,写简单的exp交互式脚本挺简单的,关键是他还是轻量级别的服务器;根据官网上的介绍,此库依赖于Jinja引擎和Werkzeug WSGI工具包;有兴趣的可以深入研究一下;工具本身是很简单的一个轻量级框架,只要一点前端基础,也是">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-02-17T08:00:00.000Z">
<meta property="article:modified_time" content="2023-03-19T09:40:34.669Z">
<meta property="article:author" content="Andy">
<meta property="article:tag" content="python-z3">
<meta property="article:tag" content="python-flask">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>python-libs z3&amp;flask</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 6.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/search/">Search</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a href="/categories/">categories</a></li><!--
     --><!--
       --><li><a href="/links/">Links</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/2023/02/27/pwn-stackpivot/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/2023/01/22/picoctf-web-one/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2023/02/17/python-libs-z3-flask/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2023/02/17/python-libs-z3-flask/&text=python-libs z3&amp;flask"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2023/02/17/python-libs-z3-flask/&title=python-libs z3&amp;flask"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2023/02/17/python-libs-z3-flask/&is_video=false&description=python-libs z3&amp;flask"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=python-libs z3&amp;flask&body=Check out this article: http://example.com/2023/02/17/python-libs-z3-flask/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2023/02/17/python-libs-z3-flask/&title=python-libs z3&amp;flask"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2023/02/17/python-libs-z3-flask/&title=python-libs z3&amp;flask"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2023/02/17/python-libs-z3-flask/&title=python-libs z3&amp;flask"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2023/02/17/python-libs-z3-flask/&title=python-libs z3&amp;flask"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2023/02/17/python-libs-z3-flask/&name=python-libs z3&amp;flask&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2023/02/17/python-libs-z3-flask/&t=python-libs z3&amp;flask"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#python-flask"><span class="toc-number">1.</span> <span class="toc-text"> Python-Flask</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#projecttask-manager"><span class="toc-number">1.1.</span> <span class="toc-text"> Project:Task Manager</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#python-z3-solver"><span class="toc-number">2.</span> <span class="toc-text"> Python-z3-solver</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#getting-started"><span class="toc-number">2.1.</span> <span class="toc-text"> Getting Started</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#boolean-logic"><span class="toc-number">2.2.</span> <span class="toc-text"> Boolean Logic</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#solver"><span class="toc-number">2.3.</span> <span class="toc-text"> Solver</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#arithmetic"><span class="toc-number">2.4.</span> <span class="toc-text"> Arithmetic</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#machine-arithmetic"><span class="toc-number">2.5.</span> <span class="toc-text"> Machine Arithmetic</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#functions"><span class="toc-number">2.6.</span> <span class="toc-text"> Functions</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        python-libs z3&amp;flask
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Andy</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2023-02-17T08:00:00.000Z" itemprop="datePublished">2023-02-17</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/Tools/">Tools</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/python-flask/" rel="tag">python-flask</a>, <a class="tag-link-link" href="/tags/python-z3/" rel="tag">python-z3</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>以下的安装过程全部省略,因为本身不存在什么兼容性问题,用python对应版本的pip进行指令安装就可以在脚本页面进行脚本编写.</p>
<h1 id="python-flask"><a class="markdownIt-Anchor" href="#python-flask"></a> Python-Flask</h1>
<p>这个库以前就看到过,写简单的exp交互式脚本挺简单的,关键是他还是轻量级别的服务器;根据官网上的介绍,此库依赖于<code>Jinja</code>引擎和<code>Werkzeug</code> WSGI工具包;有兴趣的可以深入研究一下;工具本身是很简单的一个轻量级框架,只要一点前端基础,也是可以实现一些复杂的程式</p>
<h2 id="projecttask-manager"><a class="markdownIt-Anchor" href="#projecttask-manager"></a> Project:Task Manager</h2>
<p>因为没怎么特别高级的需求,所以随便在Youtube上面找了一个1h的快速入门看了一下,质量也挺高的,下面我就直接上项目具体内容</p>
<p>入门视频:<a target="_blank" rel="noopener" href="https://youtu.be/Z1RJmh_OqeA">Learn Flask for Python - Full Tutorial</a></p>
<p>项目结构:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">├── app.py</span><br><span class="line">├── env</span><br><span class="line">│   ├── bin</span><br><span class="line">│   ├── include</span><br><span class="line">│   ├── lib</span><br><span class="line">│   └── pyvenv.cfg</span><br><span class="line">├── instance</span><br><span class="line">│   └── test.db</span><br><span class="line">├── __pycache__</span><br><span class="line">│   └── app.cpython-310.pyc</span><br><span class="line">├── static</span><br><span class="line">│   └── css</span><br><span class="line">└── templates</span><br><span class="line">    ├── base.html</span><br><span class="line">    ├── index.html</span><br><span class="line">    └── update.html</span><br></pre></td></tr></table></figure>
<p>结构作用:</p>
<ul>
<li>static:用于装css或者js这样的外部导入文件</li>
<li>templates:用于装html模板渲染页面</li>
<li>instance:这里装db数据库文件
<blockquote>
<p>这里导入了模块<code>flask_sqlalchemy</code></p>
</blockquote>
</li>
<li><strong>pycache</strong>:项目预编译字节码文件存放文件夹</li>
<li>env:虚拟环境
<blockquote>
<p>同样是导入了模块<code>virtualenv</code>,用于创造不干涉系统python环境的虚拟环境</p>
</blockquote>
</li>
</ul>
<p>主要的<code>app.py</code>文件:</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask,render_template,url_for,request,redirect</span><br><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> markupsafe <span class="keyword">import</span> escape</span><br><span class="line"></span><br><span class="line">app=Flask(__name__)</span><br><span class="line">app.config[<span class="string">&#x27;SQLALCHEMY_DATABASE_URI&#x27;</span>] = <span class="string">&#x27;sqlite:///test.db&#x27;</span></span><br><span class="line">db = SQLAlchemy(app)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Todo</span>(db.Model):</span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer,primary_key=<span class="literal">True</span>)</span><br><span class="line">    content = db.Column(db.String(<span class="number">200</span>),nullable=<span class="literal">False</span>)</span><br><span class="line">    completed = db.Column(db.Integer,default=<span class="number">0</span>)</span><br><span class="line">    date_time = db.Column(db.DateTime,default=datetime.utcnow)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&lt; Task %r&gt;&quot;</span> % self.<span class="built_in">id</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/&quot;</span>,methods=[<span class="string">&#x27;POST&#x27;</span>,<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">if</span> request.method==<span class="string">&#x27;POST&#x27;</span>:</span><br><span class="line">        task_content=request.form[<span class="string">&#x27;content&#x27;</span>]</span><br><span class="line">        new_task=Todo(content=task_content)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            db.session.add(new_task)</span><br><span class="line">            db.session.commit()</span><br><span class="line">            <span class="keyword">return</span> redirect(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;adding wrong..&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> request.method==<span class="string">&#x27;GET&#x27;</span>:</span><br><span class="line">        tasks = Todo.query.order_by(Todo.date_time).<span class="built_in">all</span>()</span><br><span class="line">        <span class="keyword">return</span> render_template(<span class="string">&#x27;index.html&#x27;</span>,tasks=tasks)    </span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/delete/&lt;int:id&gt;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">delete</span>(<span class="params"><span class="built_in">id</span></span>):</span><br><span class="line">    task_delete = Todo.query.get_or_404(<span class="built_in">id</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        db.session.delete(task_delete)</span><br><span class="line">        db.session.commit()</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Delete Wrong..&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/update/&lt;int:id&gt;&quot;</span>,methods=[<span class="string">&#x27;POST&#x27;</span>,<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">update</span>(<span class="params"><span class="built_in">id</span></span>):</span><br><span class="line"></span><br><span class="line">    task = Todo.query.get_or_404(<span class="built_in">id</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> request.method==<span class="string">&#x27;POST&#x27;</span>:</span><br><span class="line">        task.content = request.form[<span class="string">&#x27;content&#x27;</span>]</span><br><span class="line">        db.session.commit()</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">if</span> request.method==<span class="string">&#x27;GET&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> render_template(<span class="string">&#x27;update.html&#x27;</span>,task=task)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment">#create test.db</span></span><br><span class="line">    <span class="comment">#db.create_all()</span></span><br><span class="line">    </span><br><span class="line">    app.run(debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p>接下来是渲染文件:<code>index.html</code></p>
<blockquote>
<p>一下html包含了jinja的写法</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;base.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block head %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% block body %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Task Master<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    &#123;% if tasks|length &lt; 1 %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>No Tasks in there..<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    &#123;% else %&#125;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>Task<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>Added<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>Actions<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        &#123;% for task in tasks %&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>&#123;&#123;task.content&#125;&#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>&#123;&#123;task.date_time.date()&#125;&#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/delete/&#123;&#123; task.id &#125;&#125;&quot;</span>&gt;</span>Delete<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/update/&#123;&#123; task.id &#125;&#125;&quot;</span>&gt;</span>Update<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        &#123;% endfor %&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;content&quot;</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;AddTask&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>
<p>渲染页面:<code>base.html</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123; url_for(&#x27;static&#x27;,filename=&#x27;css/main.css&#x27;) &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">    &#123;% block head %&#125;&#123;% endblock %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    &#123;% block body %&#125;&#123;% endblock %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>update.html</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;base.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block head %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% block body %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Update Task<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/update/&#123;&#123; task.id &#125;&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;content&quot;</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123; task.content &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;EditTask&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>css内容:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">color</span>:cadetblue;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;sans-serif&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">table</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">700px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">border-collapse</span>: collapse;</span><br><span class="line">    <span class="attribute">border-spacing</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-tag">td</span>,<span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black ;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">form</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="python-z3-solver"><a class="markdownIt-Anchor" href="#python-z3-solver"></a> Python-z3-solver</h1>
<p>这个模块简单记录一下吧,可能不太全面,参考的是官方文档<a target="_blank" rel="noopener" href="https://ericpony.github.io/z3py-tutorial/guide-examples.htm">Z3Py Guide</a><br />
奶奶的,这个模块真是个神器,是真的好用,简直是相见恨晚</p>
<h2 id="getting-started"><a class="markdownIt-Anchor" href="#getting-started"></a> Getting Started</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = Int(&#x27;x&#x27;)</span><br><span class="line">y = Int(&#x27;y&#x27;)</span><br><span class="line">solve(x&gt;20,y&lt;7,x+2*y==12)</span><br></pre></td></tr></table></figure>
<p>这三条指令创建了两个Integer类型的变量(Z3带的Int函数),然后通过<code>solve</code>函数并且通过用户给出的限制内容找出符合限制的数值,常用的限制符:<code>&lt;</code>,<code>&lt;=</code>,<code>&gt;</code>,<code>&gt;=</code>,<code>==</code>,<code>!=</code>;比如说如上我就给了三条限制,如果我取消第三条限制,那么程序就会输出x=21,y=6的结果,显然符合条件的不止这一组数据,结果给出的是最近解;如果我再加一条限制x&lt;20,那么程序就会输出没有解</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from z3 import *</span><br><span class="line">set_html_mode = False</span><br><span class="line">x = Int(&#x27;x&#x27;)</span><br><span class="line">y = Int(&#x27;y&#x27;)</span><br><span class="line">print( simplify(x+y+2*x+3))</span><br><span class="line">print( simplify(x&lt;y+x+2))</span><br><span class="line">print( simplify(And(x+1&gt;=3,x**2+y**2+2&gt;=5)))</span><br></pre></td></tr></table></figure>
<p>介绍了公式化简,<code>set_html_mode</code>是一个控制渲染公式的开关,我这里似乎双值都没啥反应,不过问题不大;<code>simplify</code>里面放需要化简的公式或者是表达式,如果想要同时化简多个公式,可以在函数内套娃<code>And</code>函数来实现多公式\表达式的化简</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">from z3 import *</span><br><span class="line">x = Int(&#x27;x&#x27;)</span><br><span class="line">y = Int(&#x27;y&#x27;)</span><br><span class="line">n = x+y &gt;= 3</span><br><span class="line">print(n)</span><br><span class="line">print(&quot;num args:&quot;,n.num_args())</span><br><span class="line">print(&quot;children:&quot;,n.children())</span><br><span class="line">print(&quot;1st arg:&quot;,n.arg(0))</span><br><span class="line">print(&quot;2nd arg:&quot;,n.arg(1))</span><br><span class="line">print(&quot;operator:&quot;,n.decl())</span><br><span class="line">print(&quot;operator name:&quot;,n.decl().name())</span><br></pre></td></tr></table></figure>
<p>这里主要展示了如何获取公式的基础元素</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from z3 import *</span><br><span class="line">x = Real(&#x27;x&#x27;)</span><br><span class="line">y = Real(&#x27;y&#x27;)</span><br><span class="line">solve(x**2+y**2&gt;3,x**3+y&lt;5)</span><br></pre></td></tr></table></figure>
<p>利用z3解除多元不等式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from z3 import *</span><br><span class="line">x = Real(&#x27;x&#x27;)</span><br><span class="line">y = Real(&#x27;y&#x27;)</span><br><span class="line">solve(x**2+y**2==3,x**3==2)</span><br><span class="line">set_option(precision=30)</span><br><span class="line">solve(x**2+y**2==3,x**3==2)</span><br></pre></td></tr></table></figure>
<p>实数计算默认到小数点后10位,然而我们可以通过set_option函数来指定小数点位数</p>
<p><strong>Z3中常见的一类错误就是乱用元素类型</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">from z3 import *</span><br><span class="line">print(type(1/3))</span><br><span class="line">print(type(RealVal(1)/3))</span><br><span class="line">print(type(Q(1,3)))</span><br><span class="line">x=Real(&#x27;x&#x27;)</span><br><span class="line">print(x+1/3)</span><br><span class="line">print(x+Q(1,3))</span><br><span class="line">print(x+RealVal(1)/3)</span><br><span class="line">print(x+&quot;1/3&quot;)</span><br><span class="line">print(x+0.25)</span><br><span class="line">==============执行后===============</span><br><span class="line">&lt;class &#x27;float&#x27;&gt;</span><br><span class="line">&lt;class &#x27;z3.z3.ArithRef&#x27;&gt;</span><br><span class="line">&lt;class &#x27;z3.z3.RatNumRef&#x27;&gt;</span><br><span class="line">x + 3333333333333333/10000000000000000</span><br><span class="line">x + 1/3</span><br><span class="line">x + 1/3</span><br><span class="line">x + 1/3</span><br><span class="line">x + 1/4</span><br></pre></td></tr></table></figure>
<p>还是可以很清晰地看见明显的差别</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from z3 import *</span><br><span class="line">x=Real(&#x27;x&#x27;)</span><br><span class="line">solve(3*x==1)</span><br><span class="line">set_option(rational_to_decimal=True)</span><br><span class="line">set_option(precision=30)</span><br><span class="line">solve(3*x==1)</span><br></pre></td></tr></table></figure>
<p>这里指定了以非分数的方式输出数值,并且指定了精确到小数点后30位</p>
<h2 id="boolean-logic"><a class="markdownIt-Anchor" href="#boolean-logic"></a> Boolean Logic</h2>
<p>这里主要是跟逻辑符相关的操作部分</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from z3 import *</span><br><span class="line">q=Bool(&#x27;q&#x27;)</span><br><span class="line">r=Bool(&#x27;r&#x27;)</span><br><span class="line">p=Bool(&#x27;p&#x27;)</span><br><span class="line">solve(Implies(p,q),r==Not(q),Or(Not(p),r))</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from z3 import *</span><br><span class="line">q=Bool(&#x27;q&#x27;)</span><br><span class="line">p=Bool(&#x27;p&#x27;)</span><br><span class="line">print(And(p,q,True))</span><br><span class="line">print(simplify(And(p,q,True)))</span><br><span class="line">print(simplify(And(p,False)))</span><br></pre></td></tr></table></figure>
<p>以上演示了z3是如何进行布尔化简的,并且可以看到z3同样是支持True和False的Python元素直接拿来使用;</p>
<h2 id="solver"><a class="markdownIt-Anchor" href="#solver"></a> Solver</h2>
<p>这一部分是对最常用的Solver接口的介绍,也不是很难并且都是常用的功能</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">from z3 import *</span><br><span class="line">x=Int(&#x27;x&#x27;)</span><br><span class="line">y=Int(&#x27;y&#x27;)</span><br><span class="line">s=Solver()</span><br><span class="line"></span><br><span class="line">print(s)</span><br><span class="line">s.add(x&gt;10,y==x+2)</span><br><span class="line"># check if have sat value</span><br><span class="line">print(s.check())</span><br><span class="line"># create backtrace point</span><br><span class="line">s.push()</span><br><span class="line">s.add(y&lt;11)</span><br><span class="line">print(s)</span><br><span class="line"># back to pre backtrace point</span><br><span class="line">s.pop()</span><br><span class="line">print(s)</span><br></pre></td></tr></table></figure>
<p>这一部分包含了关于创建Solver解决器,并且创建回溯点和如何返回到上一个回溯点</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from z3 import *</span><br><span class="line">x=Real(&#x27;x&#x27;)</span><br><span class="line">s=Solver()</span><br><span class="line">s2=Solver()</span><br><span class="line"></span><br><span class="line">s.add(x**2==3)</span><br><span class="line">print(s.check())</span><br><span class="line"></span><br><span class="line">s2.add(2**x==3)</span><br><span class="line">print(s2.check())</span><br></pre></td></tr></table></figure>
<p>上面这种情况会直接输出unknown,表明此方程并不是无解,而是z3不支持非多项式的问题解决</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">from z3 import *</span><br><span class="line">x=Real(&#x27;x&#x27;)</span><br><span class="line">y=Real(&#x27;y&#x27;)</span><br><span class="line">s=Solver()</span><br><span class="line">s.add(x &gt; 1, y &gt; 1, Or(x + y &gt; 3, x - y &lt; 2))</span><br><span class="line">for c in s.assertions():</span><br><span class="line">    print(c)</span><br><span class="line">print(s.check())</span><br><span class="line"></span><br><span class="line">for k,v in s.statistics():</span><br><span class="line">    print(&quot;%s : %s&quot; % (k,v))</span><br></pre></td></tr></table></figure>
<p>这一部分是关于独立条件集合和性能的统计;感觉这一部分主要是用于算法优化;老实说z3范围挺广的,而且是一个非常便利的工具</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">from z3 import *</span><br><span class="line">x,y,z=Reals(&#x27;x y z&#x27;)</span><br><span class="line">s=Solver()</span><br><span class="line">s.add(x&gt;1,y&gt;1,x+y&gt;3,z-x&lt;10)</span><br><span class="line">print(s.check())</span><br><span class="line"></span><br><span class="line">m=s.model()</span><br><span class="line">print(&quot;x = %s&quot; % m[x])</span><br><span class="line"></span><br><span class="line"># traverse</span><br><span class="line">for d in m.decls():</span><br><span class="line">    print(&quot;%s = %s&quot; % (d.name(),m[d]))</span><br></pre></td></tr></table></figure>
<p>这一部分两个重要点:1.需要快速创建多个z3变量可以在变量名后面加上s,然后参考line2的写法 2.循环便利输出有解的公式需要用到model模型遍历进行输出</p>
<h2 id="arithmetic"><a class="markdownIt-Anchor" href="#arithmetic"></a> Arithmetic</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from z3 import *</span><br><span class="line">x=Real(&#x27;x&#x27;)</span><br><span class="line">y=Int(&#x27;y&#x27;)</span><br><span class="line">a,b,c=Reals(&#x27;a b c&#x27;)</span><br><span class="line">s,r=Ints(&#x27;s r&#x27;)</span><br><span class="line">print(x+y+1+(a+s))</span><br><span class="line">print(ToReal(y)+c)</span><br></pre></td></tr></table></figure>
<p>如上展示了z3 Real和Int类型在做运算时进行的类型变换,很明显Real类型在和Int运算时Int类型会在z3运算内部自动调用ToReal来防止错误发生,当然我们也可以手动调用ToReal来达成相同的目的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from z3 import *</span><br><span class="line">a,b,c=Ints(&#x27;a b c&#x27;)</span><br><span class="line">d,e=Reals(&#x27;d e&#x27;)</span><br><span class="line">solve(a&gt;b+2,a==2*c+10,c+b&lt;=1000,d&gt;=3)</span><br></pre></td></tr></table></figure>
<p>如上验证了不同运算的可行性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from z3 import *</span><br><span class="line">x,y=Reals(&#x27;x y&#x27;)</span><br><span class="line">t=simplify((x+y)**3,som=True)</span><br><span class="line">print(t)</span><br><span class="line">t=simplify(t,mul_to_power=True)</span><br><span class="line">print(t)</span><br></pre></td></tr></table></figure>
<p>这里演示了simplify的两个参数,som=True为拆解为单项式相加的形式,mul_to_power=True演示了把相同次幂的数进行合并成高次幂</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from z3 import *</span><br><span class="line">x,y=Reals(&#x27;x y&#x27;)</span><br><span class="line"># Two different way to set options</span><br><span class="line">print(simplify(x==y+2,artith_lhs=True))</span><br><span class="line">print(simplify(x==y+2,&quot;:artith-lhs&quot;,True))</span><br><span class="line"># show help page</span><br><span class="line">help_simplify()</span><br></pre></td></tr></table></figure>
<p>展示了设置simplify函数属性的两种方法和查看help帮助页面</p>
<h2 id="machine-arithmetic"><a class="markdownIt-Anchor" href="#machine-arithmetic"></a> Machine Arithmetic</h2>
<p><strong>这一部分包含的是对机器算术的介绍,现代CPU和主流的编程语言也使用的是位修复的向量来进行算术设计</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">from z3 import *</span><br><span class="line">x, y = BitVecs(&#x27;x y&#x27;,16)</span><br><span class="line">print(x+2)</span><br><span class="line"># Internal representation</span><br><span class="line">print((x+y).sexpr())</span><br><span class="line">print(simplify(x+y-1))</span><br><span class="line"></span><br><span class="line">a=BitVecVal(-1,16)</span><br><span class="line">b=BitVecVal(65535,16)</span><br><span class="line">print(simplify(a==b))</span><br><span class="line"></span><br><span class="line">a=BitVecVal(-1,32)</span><br><span class="line">b=BitVecVal(65535,32)</span><br><span class="line">print(simplify(a==b))</span><br></pre></td></tr></table></figure>
<p>如上展示了显示位的内部表示形式,和如何声明未知数值和已知位向量;倒数第二段最终打印结果是True是因为-1和65535在16位二进制向量中代表的值是一样的,而32位中显然a要大的多了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from z3 import *</span><br><span class="line">x,y=BitVecs(&#x27;x y&#x27;,32)</span><br><span class="line">solve(x+y==2,x&gt;0,y&gt;0)</span><br><span class="line">solve(x&amp;y==-y)</span><br><span class="line">solve(x&lt;0)</span><br><span class="line"># ULT=unsigned-version less than</span><br><span class="line">solve(ULT(x,0))</span><br><span class="line">solve(x&gt;&gt;2==3)</span><br><span class="line">solve(x&lt;&lt;2==3)</span><br><span class="line">solve(x&lt;&lt;2==24)</span><br></pre></td></tr></table></figure>
<p>如上展示了一些基本的位运算方法和基础函数的运用</p>
<h2 id="functions"><a class="markdownIt-Anchor" href="#functions"></a> Functions</h2>
<p>关于这一部分原文给出了大量的解释说明,说实话我也是有一部分没有仔细去弄明白;看了Stack-Overflow,这个z3 function本质上也是Python一种宏脚本定义;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">from z3 import *</span><br><span class="line">c=Int(&#x27;c&#x27;)</span><br><span class="line">t=Int(&#x27;t&#x27;)</span><br><span class="line"></span><br><span class="line">def f(x):</span><br><span class="line">    return x*t+c</span><br><span class="line">def find(data):</span><br><span class="line">    s=Solver()</span><br><span class="line">    s.add([f(x)==r for (x,r) in data])</span><br><span class="line">    t=s.check()</span><br><span class="line">    if s.check() == sat:</span><br><span class="line">        print(s.model())</span><br><span class="line">    else:</span><br><span class="line">        print(t)</span><br><span class="line"></span><br><span class="line">find([(1,55)])</span><br><span class="line">find([(12,34),(13,300)])</span><br></pre></td></tr></table></figure>
<p>如上的算法设计有两点:1. f(x),当我们给定一个已知量,则返回给我们包含未知变量的表达式,find(data)则是我们输入多条限制,函数根据限制找到符合要求的未知变量的计算值</p>
<p><strong>后面的也不写了,感觉后面板块目前有些用不上,如果真的需要用到的时候翻翻help page也是可以临时查查看的</strong></p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/search/">Search</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/categories/">categories</a></li>
         
          <li><a href="/links/">Links</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#python-flask"><span class="toc-number">1.</span> <span class="toc-text"> Python-Flask</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#projecttask-manager"><span class="toc-number">1.1.</span> <span class="toc-text"> Project:Task Manager</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#python-z3-solver"><span class="toc-number">2.</span> <span class="toc-text"> Python-z3-solver</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#getting-started"><span class="toc-number">2.1.</span> <span class="toc-text"> Getting Started</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#boolean-logic"><span class="toc-number">2.2.</span> <span class="toc-text"> Boolean Logic</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#solver"><span class="toc-number">2.3.</span> <span class="toc-text"> Solver</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#arithmetic"><span class="toc-number">2.4.</span> <span class="toc-text"> Arithmetic</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#machine-arithmetic"><span class="toc-number">2.5.</span> <span class="toc-text"> Machine Arithmetic</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#functions"><span class="toc-number">2.6.</span> <span class="toc-text"> Functions</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2023/02/17/python-libs-z3-flask/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2023/02/17/python-libs-z3-flask/&text=python-libs z3&amp;flask"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2023/02/17/python-libs-z3-flask/&title=python-libs z3&amp;flask"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2023/02/17/python-libs-z3-flask/&is_video=false&description=python-libs z3&amp;flask"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=python-libs z3&amp;flask&body=Check out this article: http://example.com/2023/02/17/python-libs-z3-flask/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2023/02/17/python-libs-z3-flask/&title=python-libs z3&amp;flask"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2023/02/17/python-libs-z3-flask/&title=python-libs z3&amp;flask"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2023/02/17/python-libs-z3-flask/&title=python-libs z3&amp;flask"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2023/02/17/python-libs-z3-flask/&title=python-libs z3&amp;flask"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2023/02/17/python-libs-z3-flask/&name=python-libs z3&amp;flask&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2023/02/17/python-libs-z3-flask/&t=python-libs z3&amp;flask"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2022-2023
    Andy
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/search/">Search</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a href="/categories/">categories</a></li><!--
     --><!--
       --><li><a href="/links/">Links</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
